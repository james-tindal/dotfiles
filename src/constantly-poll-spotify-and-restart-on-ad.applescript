use AppleScript version "2.4" -- Yosemite (10.10) or lateruse scripting additionsproperty spotify : application "Spotify"on get_current_track()	repeat		tell application "Spotify" to set current_track to current track of application "Spotify"		if current_track is not missing value then return current_track	end repeatend get_current_track--on is_ad_playing()--	set current_track to get_current_track()--	repeat--		tell application "Spotify" to set current_track to current track of application "Spotify"--		if current_track is not missing value then return current_track--	end repeat--end is_ad_playingon restart()	tell application "Spotify" to quit	repeat		if application "Spotify" is not running then			activate application "Spotify"			tell application "Spotify" to play			exit repeat		end if	end repeatend restarton restart_if_ad()	set current_track to get_current_track()	tell application "Spotify" to set is_ad to (album of current_track is "")	if is_ad then restart()end restart_if_adrepeat	restart_if_ad()end repeat